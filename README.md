–ü—Ä–æ–µ–∫—Ç –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–∫–∞–∑–∞ –Ω–∞ –ø–æ–¥–≤—è–∑–∫—É –æ–Ω–ª–∞–π–Ω-–∫–∞—Å—Å—ã Lava —Å —Ç–≥-–±–æ—Ç–æ–º.

---

# üßë‚Äçüíª Python Course Bot

Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∫—É—Ä—Å–æ–≤ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é.  
–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫—É—Ä—Å—ã, –≤—ã–±–∏—Ä–∞—Ç—å –∏—Ö –∏ –æ–ø–ª–∞—á–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ –ø–ª–∞—Ç—ë–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É **Lava**.

---

## üß∞ –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è       | –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |
|----------------|-------------------------|
| **–Ø–∑—ã–∫**        | Python 3.10+            |
| **–§—Ä–µ–π–º–≤–æ—Ä–∫ –±–æ—Ç–∞** | Aiogram 3.x             |
| **–§—Ä–µ–π–º–≤–æ—Ä–∫ API** | FastAPI                |
| **HTTP –∫–ª–∏–µ–Ω—Ç** | Requests               |
| **–û–ø–ª–∞—Ç–∞**      | Lava (https://lava.top) |
| **FSM**         | Aiogram FSM             |
| **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞**  | Inline Keyboard         |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | logging                 |

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ë–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤.
- –í—ã–±–∏—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫—É—Ä—Å.
- –í–≤–æ–¥–∏—Ç—å email.
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ **Lava API**.
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–µ–±—Ö—É–∫–∏ –æ—Ç Lava (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ).

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1. **Aiogram 3.x**
- –ë–æ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ **Aiogram 3**, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –∏ FSM.
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è callback-–∑–∞–ø—Ä–æ—Å—ã (`CallbackQuery`) –∏ –∫–æ–º–∞–Ω–¥—ã (`/start`).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä —á–µ—Ä–µ–∑ `InlineKeyboardMarkup`.

### 2. **FSM (Finite State Machine)**
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –≤–≤–æ–¥–∞ email:
```python
class FormEmail(StatesGroup):
    email = State()
```
- –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫—É—Ä—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç email, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–Ω–≤–æ–π—Å–∞.

### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Lava**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ö—É–ø–∏—Ç—å" —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è POST-–∑–∞–ø—Ä–æ—Å –∫ API Lava:
```python
payload = {
    "email": email_user["email"],
    "offerId": "91d59426-775e-41ad-b42b-fef0a5ba54b1",
    "currency": "RUB"
}
response = requests.post(f"{LAVA_API_URL}/invoice", json=payload, headers=headers)
```
- –ü–æ–ª—É—á–µ–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ `paymentUrl` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

### 4. **FastAPI**
- –°–µ—Ä–≤–µ—Ä FastAPI –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–µ–±—Ö—É–∫–∏ –æ—Ç Lava:
```python
@app.post("/webhook")
async def webhook(request: Request):
    data = await request.json()
    ...
```
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è `payment.success` ‚Äî –ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### 5. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫**
- –ë–æ—Ç –∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é `asyncio.gather()`:
```python
async def main():
    await asyncio.gather(
        start_bot(),
        start_fastapi()
    )
```

---

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API-–∫–ª—é—á Lava (`LAVA_API_KEY`) –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
- URL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–≤–æ–π—Å–æ–≤: `https://gate.lava.top/api/v2/invoice`.
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω –∏ –∫–ª—é—á –≤ `.env` —Ñ–∞–π–ª–µ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project/
‚îú‚îÄ‚îÄ main.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ –∏ FastAPI
‚îú‚îÄ‚îÄ keybords.py      # Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îî‚îÄ‚îÄ python_courses.jpg # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—É—Ä—Å–∞
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install aiogram fastapi uvicorn requests
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
python main.py
```

### 3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞:
–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ngrok`, `localhost.run` –∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

---

## ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–æ—Ä–∞–±–æ—Ç–∫–∏

- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É email —á–µ—Ä–µ–∑ `pydantic` –∏–ª–∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (PostgreSQL/SQLite) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ–ø–ª–∞—Ç–∞—Ö.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (–ø–ª–∞—Ç–µ–∂–∏, –æ—à–∏–±–∫–∏).
- –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã.
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∫—É—Ä—Å–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ ID –∏ —Ü–µ–Ω–∞–º–∏.
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–Ω–∞ FastAPI).
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã.

---




